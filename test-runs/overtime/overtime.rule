WHEN envelope:type == 'pay_request';

REQUIRE test:overtime_pay:0.0.1 AS overtime_pay;
REQUIRE test:overtime_worked:0.0.1 AS overtime_worked;

#ASSEMBLE pay_for_overtime COLUMNS FROM table:overtime_worked;
#MAP table:t
#  USING overtime_pay = add(@overtime_hours, @employee_id);

ASSEMBLE pay_for_overtime
  COLUMN employee_id FROM table:overtime_worked
  COLUMN overtime_hours FROM table:overtime_worked;
  #COLUMN overtime_multiplier FROM table:overtime_pay WHEN overtime_hours <= @max_hours;
  

  #COLUMN distance FROM table:distances WHEN envelope:parties.supplier.id.value == @EffectiveUserID
  #   distance is automatically understood as the previously created distance column (it's a name in this scope)
  #COLUMN reduction FROM table:reductions WHEN distance <= @2R3a_Distance;
